<!--
 * Author: Ranjith kumar Ankam
 * Created Date: 03-Apr-2019
 *  -->
<app-uhc-loader *ngIf="loading" [class.display-none]="printStyle"></app-uhc-loader>

<div [ngClass]="{ 'dark-theme': isDarkTheme | async }">
  <div class="example-container example-is-mobile" color="primary">
    <mat-toolbar color="primary" class="example-toolbar" [class.display-none]="!showPrintHeader && makeAbsolute">
      <!--<button mat-icon-button (click)="srnav.toggle()">-->
      <!--<mat-icon>filter</mat-icon>-->
      <!--</button>-->
      <div *ngIf="fromKOP" class="butter-bar align-horizonal">
        <div class="cross-icon">
          <mat-icon class="hover-pointer" svgIcon="closeGlossary" (click)="navigateToKOP()"></mat-icon>
        </div>
        <div class="exit-text" style="width: 35%">
          <span class="exit-provider-text" (click)="navigateToKOP()">Exit Provider View</span>
        </div>
        <div style="width: 60%" class="exit-text">
          <span
            >You are viewing as
            <span class="provider-text">{{ healthSystemName }}</span>
          </span>
        </div>
      </div>
      <div *ngIf="advocateView" class="butter-bar align-horizonal">
        <div class="cross-icon">
          <mat-icon class="hover-pointer" svgIcon="closeGlossary" (click)="navigateToPPD()"></mat-icon>
        </div>
        <div class="exit-text" style="width: 35%">
          <span class="exit-provider-text" (click)="navigateToPPD()">Exit Provider View</span>
        </div>
        <div style="width: 60%" class="exit-text">
          <span
            >You are viewing as
            <span class="provider-text">{{ healthSystemName }}</span>
          </span>
        </div>
      </div>
      <app-header
        [fromKOP]="fromKOP"
        [class.display-none]="!showPrintHeader && makeAbsolute"
        class="sticky"
        (hamburgerDisplay)="hamburgerDisplay($event)"
        [ngClass]="fromKOP || advocateView ? 'top-40' : 'top-0'"
      ></app-header>
      <div [class.sticky-footer]="showPrintHeader">
        <div class="sticky-footer-text">&copy; {{ currentYear }} UnitedHealthcare, All Rights Reserved</div>
      </div>
    </mat-toolbar>
    <mat-sidenav-container
      class="example-sidenav-container"
      [class.bg-white]="bgWhite"
      [ngClass]="{ 'top-40': fromKOP || advocateView, 'top-0': !fromKOP || !advocateView, 'kop-landing': isKop }"
      color="primary"
      (backdropClick)="close()"
    >
      <!-- SIDE NAVIGATION BAR  fixedTopGap="65"-->
      <mat-sidenav
        class="side-navigation"
        #snav
        [mode]="'side'"
        [fixedInViewport]="true"
        [opened]="!(!sideNavFlag || makeAbsolute)"
        [class.display-none]="makeAbsolute || boolRemoveLeftNav"
        [ngClass]="fromKOP || advocateView ? 'top-112' : ''"
        color="primary"
      >
        <!-- UHC LOGO BLOCK -->
        <!-- <div class="uhc-logo-block">
          <img class="uhc-logo" src="/src/assets/images/UHC Logo@2x.png" />
        </div> -->
        <!-- END OF UHC LOGO BLOCK -->
        <!-- HEALTHSYSTEM REPRESENTATION BLOCK -->
        <div class="health-system-representation-block" *ngIf="!isKop">
          <p class="representing-label">You are representing</p>
          <p class="health-system-name">{{ healthSystemName }}</p>
          <p class="Group-premium-designation" *ngIf="GroupPremiumDesignation && internalUser">HPP</p>
          <p
            class="change-provider"
            *ngIf="(disableChangeProvider || externalProvidersCount) && !AcoFlag"
            (click)="openDialog()"
          >
            Change Organization
          </p>
          <p class="view-Tax-Id-Summary-div" *ngIf="!AcoFlag">
            <a class="view-Tax-Id-Summary" (click)="taxSummaryLink()">
              View Tax ID Number (TIN) Summary
            </a>
          </p>
        </div>
        <!-- END OF HEALTHSYSTEM REPRESENTATION BLOCK -->

        <div *ngIf="isKop" class="simulate-external-view">
          <button class="simulate-external-view-btn btn btn-secondary" (click)="openSimulateViewDialog()" mat-button>
            Simulate External View
          </button>
        </div>

        <!-- MENU CATEGORIES BLOCK -->
        <div class="nav-mat-list-items" *ngIf="!AcoFlag">
          <mat-nav-list
            *ngFor="let category of navCategories; let rowIndex = index"
            [ngClass]="
              rowIndex === 0
                ? 'navCategoryItem firstNavCategory'
                : rowIndex === navCategories.length - 1
                ? 'navCategoryItem lastNavCategory'
                : 'navCategoryItem'
            "
          >
            <!-- USING ACCORDIAN IF CATEGORY HAS SUB CATEGORIES -->

            <mat-expansion-panel
              *ngIf="category.children"
              class="nav-menu-expansion-panel mat-elevation-z0"
              [expanded]="_allExpandState"
              [disabled]="category.disabled"
              [class.pointer-none]="category.disabled"
            >
              <mat-expansion-panel-header
                class="nav-menu-category"
                [collapsedHeight]="'25px'"
                [expandedHeight]="'25px'"
              >
                <mat-panel-title>
                  <ng-container *ngIf="!category.disabled">
                    <mat-icon class="nav-menu-icons" svgIcon="{{ category.icon }}"></mat-icon>
                    <!--<img src="{{ category.icon }}" class="nav-menu-icons" />-->{{ category.name }}
                  </ng-container>
                </mat-panel-title>
              </mat-expansion-panel-header>
              <mat-nav-list *ngFor="let subcategory of category.children">
                <ng-container *ngIf="!subcategory.disabled">
                  <mat-expansion-panel
                    *ngIf="subcategory.children"
                    class=" nav-menu-expansion-panel mat-elevation-z0 child-nav-menu-expansion-panel"
                    [expanded]="_allExpandState"
                    [disabled]="subcategory.disabled"
                    [class.pointer-none]="subcategory.disabled"
                  >
                    <mat-expansion-panel-header
                      class="sub-menu-sub-header nav-sub-category-items"
                      [collapsedHeight]="'18px'"
                      [expandedHeight]="'18px'"
                      style="font-size:14px"
                    >
                      <mat-panel-title class="sub-menu-expansion-header">
                        {{ subcategory.name }}
                      </mat-panel-title>
                    </mat-expansion-panel-header>

                    <a
                      class="nav-sub-category-items second-level-link "
                      (click)="collapseExpansionPanels(supersubcategory.path)"
                      [routerLinkActiveOptions]="{ exact: true }"
                      mat-list-item
                      routerLink="{{ supersubcategory.path }}"
                      routerLinkActive="active-link"
                      *ngFor="let supersubcategory of subcategory.children"
                      >{{ supersubcategory.name }}</a
                    >
                  </mat-expansion-panel>

                  <a
                    *ngIf="!subcategory.children"
                    class="nav-sub-category-items"
                    (click)="collapseExpansionPanels(subcategory.path)"
                    [routerLinkActiveOptions]="{ exact: true }"
                    mat-list-item
                    routerLink="{{ subcategory.path }}"
                    routerLinkActive="active-link"
                    >{{ subcategory.name }}</a
                  >
                </ng-container>
              </mat-nav-list>
            </mat-expansion-panel>
            <!-- CATEGORY WHICH HAS NO SUB CATEGORIES -->
            <div *ngIf="checkToggle(category.disabled)">
              <a
                (click)="collapseExpansionPanels(category.path)"
                class="nav-no-child-category"
                [routerLinkActiveOptions]="{ exact: true }"
                mat-list-item
                routerLink="{{ category.path }}"
                routerLinkActive="active-link"
                *ngIf="!category.children"
              >
                <!--<img
               class="nav-menu-icons" [src]="category.icon" />-->
                <mat-icon class="nav-menu-icons" svgIcon="{{ category.icon }}"></mat-icon> {{ category.name }}
              </a>
            </div>
          </mat-nav-list>
        </div>
        <!-- END OF MENU CATEGORIES BLOCK -->

        <!-- SIGNOUT BLOCK -->
        <!-- <div class="signout-block">
          <p class="signout-label" (click)="signOut()">
            <a>
              <mat-icon class="nav-menu-icons" svgIcon="sign-out"></mat-icon
              ><span class="sign-out-text">Sign Out </span>
            </a>
          </p>
        </div>-->
        <!-- END OF SIGNOUT BLOCK -->
      </mat-sidenav>
      <!-- END OF SIDE NAVIGATION BAR-->

      <!-- RIGHT SIDE FILTER Glossary BAR-->
      <mat-sidenav
        #srnav
        [mode]="'over'"
        [class.display-none]="makeAbsolute"
        class="sidenav-glossary"
        position="end"
        [fixedInViewport]="true"
        [opened]="glossaryFlag || filterFlag"
        id="side-nav-glossary"
        [disableClose]="true"
      >
        <div class="filter-div-scroll">
          <div [ngClass]="{ sidemargin: glossaryFlag, 'sidemargin-filter': filterFlag }">
            <div *ngIf="glossaryFlag" class="mat-details">
              <div class="h-3-title-filter">
                <div class="close-icon-style">
                  <mat-icon class="icon-left-filter" svgIcon="closeGlossary" (click)="closeGlossary()"> </mat-icon>
                </div>
                <div class="filter-text">Knowledge Center</div>
              </div>
            </div>
            <div *ngIf="filterFlag" class="mat-filter-details">
              <div class="h-3-title-filter">
                <div class="close-icon-style">
                  <mat-icon class="icon-left-filter" svgIcon="closeFilter" (click)="closeFilter()"> </mat-icon>
                </div>
                <div class="filter-text">Filters</div>
              </div>
            </div>
            <app-glossary
              *ngIf="glossaryFlag && glossaryTitle"
              [title]="glossaryTitle"
              [MetricID]="glossaryMetricID"
            ></app-glossary>
            <app-uhci-filter *ngIf="filterFlag && !isKop" (filterFlag)="filterFlagChange($event)"></app-uhci-filter>
            <!-- <app-kop-filters
              *ngIf="filterFlag && isKop"
              [filterurl]="filterurl"
              [filterData]="filterData"
              [customFilter]="customFilter"
              (filterFlag)="filterFlagChange($event)"
            ></app-kop-filters> -->
            <app-uhc-kop-filter
              *ngIf="filterFlag && isKop"
              [customFilter]="customFilter"
              (filterFlag)="filterFlagChange($event)"
            ></app-uhc-kop-filter>
          </div>
        </div>
      </mat-sidenav>

      <!-- END OF RIGHT SIDE FILTER Glossary BAR-->

      <mat-sidenav-content color="primary">
        <router-outlet></router-outlet>
        <!-- <router-outlet (activate)="changeOfRoutes()"></router-outlet> -->
      </mat-sidenav-content>
    </mat-sidenav-container>
    <app-footer-common class="footer-block" [class.display-none]="makeAbsolute"></app-footer-common>
  </div>
</div>
